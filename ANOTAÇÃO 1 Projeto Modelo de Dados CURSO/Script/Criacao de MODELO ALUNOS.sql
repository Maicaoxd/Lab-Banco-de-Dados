CREATE TABLE TB_ESTADO (
	SIGLA_ESTADO char(2),
	NOME_ESTADO varchar(40)
);

ALTER TABLE TB_ESTADO 
ADD CONSTRAINT PK_ESTADO 
PRIMARY KEY (SIGLA_ESTADO);

CREATE TABLE TB_CLASSE (
	ID_CLASSE smallint,
	ID_ANDAR smallint
);

ALTER TABLE TB_CLASSE 
ADD CONSTRAINT PK_CLASSE 
PRIMARY KEY (ID_CLASSE);

CREATE TABLE TB_PROFESSOR (
	ID_PROFESSOR char(3),
	NOME_PROFESSOR varchar(25)
);

ALTER TABLE TB_PROFESSOR 
ADD CONSTRAINT PK_PROFESSOR 
PRIMARY KEY (ID_PROFESSOR);

CREATE TABLE TB_ALUNO (
	COD_ALUNO smallint,
	NOME_ALUNO varchar(45),
	END_ALUNO varchar(100),
	SIGLA_ESTADO char(2),
	ID_CLASSE smallint
);

ALTER TABLE TB_ALUNO 
ADD CONSTRAINT PK_ALUNO 
PRIMARY KEY (COD_ALUNO);

ALTER TABLE TB_ALUNO 
ADD CONSTRAINT FK_TB_ALUNO_TB_ESTADO 
FOREIGN KEY (SIGLA_ESTADO) REFERENCES TB_ESTADO (SIGLA_ESTADO);

ALTER TABLE TB_ALUNO 
ADD CONSTRAINT FK_TB_ALUNO_TB_CLASSE 
FOREIGN KEY (ID_CLASSE) REFERENCES TB_CLASSE (ID_CLASSE);

CREATE TABLE TB_DISCIPLINA (
	ID_DISCIPLINA char(3),
	NOME_DISCIPLINA varchar(15),
	ID_PROFESSOR_DISCIPLINA CHAR(3),
	NOTA_MINIMA_DISCIPLINA smallint
);

ALTER TABLE TB_DISCIPLINA
ADD CONSTRAINT PK_DISCIPLINA
PRIMARY KEY (ID_DISCIPLINA);

ALTER TABLE TB_DISCIPLINA 
ADD CONSTRAINT FK_TB_DISCIPLINA_TB_PROFESSOR 
FOREIGN KEY (ID_PROFESSOR_DISCIPLINA) REFERENCES TB_PROFESSOR (ID_PROFESSOR);

CREATE TABLE TB_ALUNO_DISCIPLINA (
	COD_ALUNO smallint,
	ID_DISCIPLINA char(3),
	NOTA_ALUNO smallint
);

ALTER TABLE TB_ALUNO_DISCIPLINA 
ADD CONSTRAINT FK_TB_ALUNO_DISCIPLINA_TB_ALUNO 
FOREIGN KEY (COD_ALUNO) REFERENCES TB_ALUNO (COD_ALUNO);

ALTER TABLE TB_ALUNO_DISCIPLINA 
ADD CONSTRAINT FK_TB_ALUNO_DISCIPLINA_TB_DISCIPLINA
FOREIGN KEY (ID_DISCIPLINA) REFERENCES TB_DISCIPLINA (ID_DISCIPLINA);

SET FOREIGN_KEY_CHECKS = 0;

INSERT INTO TB_PROFESSOR (ID_PROFESSOR, NOME_PROFESSOR)
VALUES 
	('JOI', 'JOILSON CARDOSO'),
	('OSE', 'OSEAS SANTANA'),
	('VIT', 'VITOR VASCONCELOS'),
	('FER', 'JOSE ROBERTO FERROLI'),
	('LIM', 'VALMIR LIMA'),
	('EDS', 'EDSON SILVA'),
	('WAG', 'WAGNER OKIDA');	

INSERT INTO TB_ALUNO (COD_ALUNO, NOME_ALUNO, END_ALUNO, SIGLA_ESTADO, ID_CLASSE)
VALUES 
	(1, 'ANTONIO CARLOS PENTEADO', 'RUA X', 'SP', 1),
	(2, 'AUROMIR DA SILVA VALDEVINO', 'RUA W', 'SP', 1),
	(3, 'ANDRE COSTA', 'RUA T', 'SP', 1),
	(4, 'ROBERTO SOARES DE MENEZES', 'RUA BW', 'SP', 2),
	(5, 'DANIA', 'RUA CCC', 'SP', 2),
	(6, 'CARLOS MAGALHAES', 'AV SP', 'SP', 2),
	(7, 'MARCELO RAUBA', 'AV SAO LUIS', 'SP', 3),
	(8, 'FERNANDO', 'AV COUNTYR', 'SP', 3),
	(9, 'WALMIR BURIN', 'RUA SSISIS', 'SP', 3);
	
INSERT INTO TB_DISCIPLINA (ID_DISCIPLINA, NOME_DISCIPLINA, ID_PROFESSOR_DISCIPLINA, NOTA_MINIMA_DISCIPLINA)
VALUES 
	('MAT', 'MATEMATICA', 'JOI', 7),
	('POR', 'PORTUGUES', 'VIT', 5),
	('FIS', 'FISICA', 'OSE', 3),
	('HIS', 'HISTORIA', 'EDS', 2),
	('GEO', 'GEOGRAFIA', 'WAG', 4),
	('ING', 'INGLES', 'LIM', 2);
	
INSERT INTO TB_ALUNO_DISCIPLINA (COD_ALUNO, ID_DISCIPLINA, NOTA_ALUNO)
VALUES 
	(1, 'MAT', 0),
	(2, 'MAT', 0),
	(3, 'MAT', 1),
	(4, 'POR', 2),
	(5, 'POR', 2),
	(6, 'POR', 2),
	(7, 'FIS', 3),
	(8, 'FIS', 3),
	(9, 'FIS', 3),
	(1, 'POR', 2),
	(2, 'POR', 2),
	(7, 'POR', 2),
	(1, 'FIS', 3);
	
SET FOREIGN_KEY_CHECKS = 1;